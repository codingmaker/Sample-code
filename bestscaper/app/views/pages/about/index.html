<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/png" href="/images/favicon.png"/>
    <title>Bestscaper : About us</title>
    <meta name = "keywords" content="<%-keywords%>">
    <meta name = "description" content="<%-description%>">
    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="libs/single_page/css/bootstrap.min.css" type="text/css">

    <!-- Custom Fonts -->
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="libs/single_page/font-awesome/css/font-awesome.min.css" type="text/css">

    <!-- Plugin CSS -->
    <link rel="stylesheet" href="libs/single_page/css/animate.min.css" type="text/css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="libs/single_page/css/creative.css" type="text/css">
    
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- google  -->
    <script src="http://maps.google.com/maps/api/js?sensor=false&libraries=places&language=en"></script>
    
    <!-- jQuery -->
    <script src="libs/single_page/js/jquery.js"></script>
    <link rel="stylesheet" href="/libs/tel-input/build/css/intlTelInput.css">
    <style>
    .iti-flag {background-image: url("lib/tel-input/build/img/flags.png");}
    </style>
    <script src="/libs/tel-input/build/js/intlTelInput.min.js"></script>
    <script src="/libs/tel-input/build/js/utils.js"></script>
</head>

<body id="page-top">
    <%- include('../../layout/header.html') -%>
    
    
    <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand page-scroll" href="/">Bestscaper</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a class="page-scroll" href="#about">About</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#services">Services</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#pricing">Pricing</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#register">Register</a>
                    </li>
                    <li>
                        <a class="page-scroll" href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container-fluid -->
    </nav>

    <header>
        <div class="header-content">
            <div class="header-content-inner">
                <h1>Start your business with Bestscaper</h1>
                <hr>
                <p>
                    Register your company and get new customers!
                    We will help you grow.
                </p>
                <a href="#about" class="btn btn-primary btn-xl page-scroll">Find Out More</a>
            </div>
        </div>
    </header>

    <section class="bg-primary" id="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 text-center">
                    <h2 class="section-heading">We've got what you need!</h2>
                    <hr class="light">
                    <p class="text-faded">
                        Clients are waiting for your offer.
                        Clients want to find a qualified landscaper like you.
                        Once you set up your business area, Clients will contact you via your page.
                        We will provide your company with basic web profile.
                        It is time to register and grow your business today.
                    </p>
                    <a href="#register" class="btn btn-default btn-xl page-scroll">Get Started!</a>
                </div>
            </div>
        </div>
    </section>

    <section id="services">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Our Service</h2>
                    <hr class="primary">
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-6 text-center">
                    <div class="service-box">
                        <i class="fa fa-4x fa-diamond wow bounceIn text-primary"></i>
                        <h3>Connection</h3>
                        <p class="text-muted">
                            We are a connection between Clients and landscapers.
                        </p>
                    </div>
                </div>

                <div class="col-lg-3 col-md-6 text-center">
                    <div class="service-box">
                        <i class="fa fa-4x fa-paper-plane wow bounceIn text-primary" data-wow-delay=".1s"></i>
                        <h3>Information</h3>
                        <p class="text-muted">
                            We provide information about Landscapers and Clients who are looking to spruce up their yard.
                        </p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 text-center">
                    <div class="service-box">
                        <i class="fa fa-4x fa-newspaper-o wow bounceIn text-primary" data-wow-delay=".2s"></i>
                        <h3>Up to Date</h3>
                        <p class="text-muted">
                            We are providing Up to Date Information for Clients. 
                        </p>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 text-center">
                    <div class="service-box">
                        <i class="fa fa-4x fa-heart wow bounceIn text-primary" data-wow-delay=".3s"></i>
                        <h3>Favorite</h3>
                        <p class="text-muted">
                            Landscapers can get patrons, Clients can find skillful Landscapers like you
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="pricing">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="section-heading">Pricing</h2>
                    <hr class="primary">
                </div>
            </div>
        </div>
        <div class="container">
            <div class="row">
                <div class="col-lg-4 text-center">
                    <div class="service-box">
                        <i class="fa fa-credit-card fa-4x wow bounceIn basic"></i>
                        <h3 class="basic">Basic</h3>
                        <p class="text-muted">Free</p>
                        <ul class="service-content">
                            <li>Photos: 80MB of space</li>
                            <li>You can see the client's contact number & email on the post.</li>
                            <li>You can have a basic page for free.</li>
                            <li>You can advertise in 2 cities within your business area.</li>
                        </ul>
                    </div>
                </div>

                <div class="col-lg-4 text-center">
                    <div class="service-box">
                        <i class="fa fa-credit-card fa-4x wow bounceIn gold" data-wow-delay=".1s"></i>
                        <h3 class="gold">Gold</h3>
                        <p class="text-muted">$9 / month</p>
                        <ul class="service-content">
                            <li>Photos: 250MB of space</li>
                            <li>You can see the client's contact number & email on the post.</li>
                            <li>You can have a basic page for free.</li>
                            <li>You can advertise in 4 cities within your business area.</li>
                        </ul>
                    </div>
                </div>

                <div class="col-lg-4 text-center">
                    <div class="service-box">
                        <i class="fa fa-credit-card fa-4x wow bounceIn platinum" data-wow-delay=".2s"></i>
                        <h3 class="platinum">Platinum</h3>
                        <p class="text-muted">$19 / month</p>
                        <ul class="service-content">
                            <li>Photos: Unlimited space</li>
                            <li>You can see the client's contact number & email on the post.</li>
                            <li>You can have a basic page for free.</li>
                            <li>You can advertise in 6 cities within your business area.</li>
                            <li>Receive an email notification every time a client writes a new post.(Within your business area)</li>
                        </ul>
                    </div>
                </div>
                
            </div>
        </div>
    </section>

    
    <style>
        #map-canvas{
            min-height:400px;
        }
        .intl-tel-input{
            display:block;
        }
        .register-btn{
            margin-top:20px;
        }
        .header{
            display:none;
        }
        .require-verify{
            display:none;
        }
    </style>
    <% 
        if(typeof user != 'undefined') { 
            if(user.verified){
                if(user.roles.indexOf('company') === -1) { %>
    <section id="register">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 text-center">
                    <h2 class="section-heading">Let's Fill The Form</h2>
                    <hr class="primary">
                    <p>
                        Ready to start your business with us? 
                        That's great! Give us your company's basic information.
                    </p>
                </div>
                <div class="col-lg-11 col-lg-offset-1 text-center">
                     
                    <form class="form-horizontal" >
                      <div class="form-group">
                        <label class="col-sm-2 control-label">Company Name</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control" placeholder="Company Name" id="companyName">
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-2 control-label">Company Email</label>
                        <div class="col-sm-10">
                          <input type="email" class="form-control" placeholder="Company Email" id="companyEmail">
                        </div>
                      </div>
                      <div class="form-group">
                        <label class="col-sm-2 control-label">Contact Number</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control" id ="companyContactNumber" placeholder="Company ContactNumber">
                        </div>
                      </div>
                      <div class="form-group">
                        <label for="inputPassword" class="col-sm-2 control-label">Company Address</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control" id="companyAddress" placeholder = "Company Address">
                        </div>
                      </div>
                      <div class="form-group">
                        <label for="inputPassword" class="col-sm-2 control-label">Company Address2</label>
                        <div class="col-sm-10">
                          <input type="text" class="form-control" id="companyAddress2" placeholder = "Company Address2">
                        </div>
                      </div>
                    </form>
                    <p id="registerHint" style="color:red"></p>
                    <div id="map-canvas">
                    </div>
                       
                    
                </div>
         
            </div>
                   
            <div class="register-btn text-center">
                <input type="submit" class="btn btn-lg btn-danger" value="Submit" onclick="addCompany()" id="submitBtn">
            </div>
            
        </div>

    </section>
    <%}else{%>
    <section id="register">
        <div class="container">
            <div style="font-size:1.4em; font-weight:bold">You already registered.</div>
        </div>
    </section>
    <%}%>
    <% }else{ %>
    <section id="register">
        <div class="container">
            <div style="font-size:1.4em; font-weight:bold">Please verify your email.</div>
        </div>
    </section>
    <%} %>

    <%}else{ %>
        <div class="container">
            <div style="font-size:1.4em; font-weight:bold">Please 
            <a href="#" onclick ="modalChange('signin')">Login</a> for registering your business</div>
        </div>
    <% } %>
    <section id="contact">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 text-center">
                    <h2 class="section-heading">Let's Get In Touch!</h2>
                    <hr class="primary">
                    <p>Send us an email and we will get back to you as soon as possible!</p>
                </div>
                
                
            </div>
            <div class="text-center">
                <i class="fa fa-envelope-o fa-3x wow bounceIn" data-wow-delay=".1s"></i>
                <p><a href="mailto:your-email@your-domain.com">info@bestscaper.com</a></p>
            </div>
        </div>
    </section>
    <script>
        // init marker as wide scope var;
        var marker;
        var addressComponentForm = {
          street_number: 'short_name',
          route: 'long_name',
          locality: 'long_name',
          administrative_area_level_1: 'short_name',
          country: 'long_name',
          postal_code: 'short_name'
        };

        var completeAddress = {
            street_number: null,
            route: null,
            locality: null,
            administrative_area_level_1: null,
            country: null,
            postal_code: null
        };  

        function fillInAddress(place){

            for (var i = 0; i < place.address_components.length; i++) {

                var addressType = place.address_components[i].types[0];
                if (addressComponentForm[addressType]) {
                    var val = place.address_components[i][addressComponentForm[addressType]];
                    completeAddress[addressType] = val;
                }
            }
            console.log(completeAddress);
        }


        //when they user is logged on , put the information on the form.
        <% if(typeof user != 'undefined') { %>
            $('#companyEmail').val('<%=user.email%>');
            $('#companyContactNumber').val('<%=user.contactNumber%>');
        <% } %> 


        var input = (document.getElementById('companyAddress'));
        var mapOptions = {
            center: new google.maps.LatLng(-33.8688, 151.2195),
            zoom: 13
          };
        var map = new google.maps.Map(document.getElementById('map-canvas'),mapOptions);
        var autocomplete = new google.maps.places.Autocomplete(input);
        autocomplete.bindTo('bounds', map);
        // var infowindow = new google.maps.InfoWindow();
        marker = new google.maps.Marker({
            map: map,
            anchorPoint: new google.maps.Point(0, -29),
            draggable : true
        });
        
        marker.setIcon(/** @type {google.maps.Icon} */({
            url: 'http://maps.gstatic.com/mapfiles/place_api/icons/geocode-71.png',
            size: new google.maps.Size(71, 71),
            origin: new google.maps.Point(0, 0),
            anchor: new google.maps.Point(17, 34),
            scaledSize: new google.maps.Size(35, 35)
        }));


        marker.setPosition(new google.maps.LatLng(parseFloat(-33.8688),parseFloat(151.2195)) );


        google.maps.event.addListener(marker, 'dragend', function(event){
            console.log(event);
        });
        google.maps.event.addListener(autocomplete, 'place_changed', function() {
            var place = autocomplete.getPlace();
            


            if (!place.geometry) {
              window.alert("We can't find geometry please move your marker on the map");
              return;
            }
            // If the place has a geometry, then present it on a map.
            if (place.geometry.viewport) {

              map.fitBounds(place.geometry.viewport);
            } else {
              map.setCenter(place.geometry.location);
              map.setZoom(17);  // Why 17? Because it looks good.
            }
            fillInAddress(place);
            marker.setPosition(place.geometry.location);
            marker.setVisible(true);
        })


        // contactNumber setting.
        var option = {
            "allowExtensions" : true,
            "autoFormat" : true
        }
        var number = $("#companyContactNumber").intlTelInput(option);


        var addCompany = function(){
            $('#submitBtn').attr('disabled',true);
            
                if($('#companyName').val().length){
                    if($('#companyName').val().length < 40){
                        if($('#companyEmail').val()){
                            if($('#companyContactNumber').val()){
                                if(completeAddress.locality){
                                

                                    var formData = {
                                        companyName : $('#companyName').val(),
                                        companyEmail : $('#companyEmail').val(),
                                        companyContactNumber : $('#companyContactNumber').val(),
                                        companyAddress : {},
                                        location : {

                                        }
                                    }
                                    formData.companyAddress = completeAddress;
                                    formData.companyAddress.findAddress = $('#companyAddress').val();
                                    formData.companyAddress.other = $('#companyAddress2').val();
                                    formData.location.coordinates = [marker.getPosition().lng(), marker.getPosition().lat()];
                                    jQuery.ajax({
                                        url: "/companies/add_company", 
                                        type: "POST",
                                        statusCode : {
                                            500 : function(err){
                                                console.log(err);
                                            },
                                            400 : function(err){
                                                console.log(err);
                                            }
                                        },
                                        data: formData, 
                                        success: function (data, textStatus, jqXHR) { 
                                            if(data.status == 'success'){
                                                window.location.href="/companies/my_company/dashboard";
                                            }
                                            
                                        }
                                    });
                                    event.preventDefault();
                                }else{
                                    $('#registerHint').html('Please select your address on the autocomplete list');
                                    $('#companyAddress').focus();
                                    $('#submitBtn').attr('disabled',false);
                                }
                            }else{
                                $('#registerHint').html('Please fill your contact number field');
                                $('#companyContactNumber').focus();
                                $('#submitBtn').attr('disabled',false);

                            }
                        }else{
                            $('#registerHint').html('please fill your email field');
                            $('#companyEmail').focus();
                            $('#submitBtn').attr('disabled',false);

                        }

                    }else{
                        $('#registerHint').html('company name can\'t be over 50 characters');
                        $('#companyName').focus();
                        $('#submitBtn').attr('disabled',false);

                    }
                    
                }else{
                    $('#registerHint').html('Please fill your company name field');
                    $('#companyName').focus();
                    $('#submitBtn').attr('disabled',false);

                }
            
            
        }
    </script>


    <!-- Bootstrap Core JavaScript -->
    <script src="libs/single_page/js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="libs/single_page/js/jquery.easing.min.js"></script>
    <script src="libs/single_page/js/jquery.fittext.js"></script>
    <script src="libs/single_page/js/wow.min.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="libs/single_page/js/creative.js"></script>

</body>

</html>
